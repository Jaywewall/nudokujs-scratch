(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(l){if(l.ep)return;l.ep=!0;const i=s(l);fetch(l.href,i)}})();const p=document.getElementById("sudoku-grid"),v=document.getElementById("number-picker");document.getElementById("game-container");const S={backdrop:document.getElementById("modal-backdrop"),info:document.getElementById("info-modal"),settings:document.getElementById("settings-modal"),reset:document.getElementById("reset-modal"),newGameSelect:document.getElementById("new-game-select-modal"),assistance:document.getElementById("assistance-modal")},K=document.getElementById("undo-redo-popover"),C=document.getElementById("radial-menu"),b=document.getElementById("input-pill"),e={initialBoardString:"530070000600195000098000060800060003400803001700020006060000280000419005000080079",initialSolutionString:"534678912672195348198342567859761423426853791713924856961537284287419635345286179",currentSolutionString:"",gameState:[],history:[],historyIndex:-1,selectedCells:new Set,inputModeCell:null,pointerDownTime:0,longPressTimer:null,isDragging:!1,dragStartCell:null,dragMode:"select",selectionIsActioned:!1,lastDragIndex:-1,isCandidateIsolationMode:!1,pickerSelectedNumbers:new Set,pillSessionActive:!1,longPressFired:!1,lastTap:0,lastTapIndex:-1,radialTargetIndex:null,tappedTargetCellIndex:null,isBlackoutModeEnabled:!1,isAssistBiValueActive:!1,isAssistHiddenSinglesActive:!1,peers:[],puzzleCatalog:{Easy:[],Medium:[],Hard:[],Expert:[]},activeDifficulty:"Medium",solvedPuzzlesData:{},currentPuzzleId:null},_=300,X=Array.from({length:9},(t,n)=>`var(--color-${n+1})`);function g(){const t=v.querySelector(".picker-selected"),n=t?parseInt(t.dataset.number,10):null,s=e.selectedCells.size>0;for(let l=0;l<81;l++){const i=e.gameState[l],o=p.children[l];o.innerHTML="",o.className="sudoku-cell flex items-center justify-center text-2xl cursor-pointer relative",i.isGiven&&o.classList.add("font-medium","text-slate-700"),e.selectedCells.has(l)&&o.classList.add("selected"),e.tappedTargetCellIndex===l&&o.classList.add("tapped-target");let r=!1;if(e.isBlackoutModeEnabled&&n!==null&&(i.value&&i.value!==n&&(r=!0),i.antiCandidates.has(n)&&(r=!0)),r&&o.classList.add("blacked-out"),i.value){const f=document.createElement("span");f.textContent=i.value,f.classList.add(`c${i.value}`),r&&(f.style.opacity="0"),o.appendChild(f)}else{const f=document.createElement("div");f.className="candidates-grid";for(let u=1;u<=9;u++){const y=document.createElement("div");y.className="candidate-item",i.candidates.has(u)&&(y.textContent=u,y.classList.add(`c${u}`)),i.antiCandidates.has(u)&&(y.classList.add("anti"),y.textContent=u),f.appendChild(y)}o.appendChild(f)}s||(n!==null&&i.value===n?o.classList.add(`bgc${n}`):e.peers[l]&&e.tappedTargetCellIndex!==null&&e.peers[l].all.has(e.tappedTargetCellIndex)&&o.classList.add("bg-slate-200"))}e.isAssistBiValueActive?(document.body.classList.add("assist-bivalue-active"),e.gameState.forEach((l,i)=>{!l.value&&l.candidates.size===2&&p.children[i].classList.add("bivalue-cell")})):(document.body.classList.remove("assist-bivalue-active"),p.querySelectorAll(".bivalue-cell").forEach(i=>i.classList.remove("bivalue-cell"))),p.querySelectorAll('[class*="animate-pulse-c"]').forEach(l=>{l.className=l.className.replace(/animate-pulse-c\d/g,"").trim()}),e.isAssistHiddenSinglesActive&&e.gameState.forEach((l,i)=>{l.hiddenSingle!==null&&p.children[i].classList.add(`animate-pulse-c${l.hiddenSingle}`)})}async function W(){try{const n=await(await fetch("/public/puzzles.json")).json();Object.assign(e.puzzleCatalog,n),Q();const s=e.puzzleCatalog[e.activeDifficulty]?.[0]||e.puzzleCatalog.Easy?.[0];s?L(s.puzzle,s.solution,s.id):(console.error("No puzzles found for default difficulties."),L(e.initialBoardString,e.initialSolutionString))}catch(t){console.error("Error loading puzzles:",t),L(e.initialBoardString,e.initialSolutionString)}}function H(t){const n=document.getElementById("puzzle-list-container");if(!n)return;const s=e.puzzleCatalog[t];if(!s||s.length===0){n.innerHTML='<p class="text-sm text-center text-[var(--text-muted)]">No puzzles available for this difficulty.</p>';return}n.innerHTML="",s.forEach(a=>{const l=e.solvedPuzzlesData[t]?.includes(a.id),i=document.createElement("button");i.classList.add("w-full","p-2","text-left","rounded-md","transition","flex","items-center","justify-between"),a.id===e.currentPuzzleId?i.classList.add("bg-blue-500","text-white","font-medium"):l?i.classList.add("bg-green-100","hover:bg-green-200","text-green-800"):i.classList.add("bg-white","hover:bg-slate-200");const o=document.createElement("span");if(o.textContent=`Puzzle #${a.id}`,i.appendChild(o),l){const r=document.createElement("span");r.innerHTML="&#10003;",r.classList.add("font-bold","text-green-600"),i.appendChild(r)}i.addEventListener("click",()=>{L(a.puzzle,a.solution,a.id),document.getElementById("new-game-select-modal").style.display="none",document.getElementById("modal-backdrop").style.display="none"}),n.appendChild(i)})}function Q(){const t=localStorage.getItem("solvedPuzzles");t?e.solvedPuzzlesData=JSON.parse(t):e.solvedPuzzlesData={Easy:[],Medium:[],Hard:[],Expert:[]}}function N(){const t=document.getElementById("header-undo-btn"),n=document.getElementById("header-redo-btn"),s=document.getElementById("popover-undo-btn"),a=document.getElementById("popover-redo-btn");t&&(t.disabled=e.historyIndex<=0),n&&(n.disabled=e.historyIndex>=e.history.length-1),s&&(s.disabled=e.historyIndex<=0),a&&(a.disabled=e.historyIndex>=e.history.length-1)}function B(){Z(),x(),w()}function Z(){e.selectedCells.size>0&&(e.selectedCells.forEach(t=>{p.children[t]?.classList.remove("selected")}),e.selectedCells.clear(),g())}function x(){if(e.tappedTargetCellIndex!==null){const t=p.children[e.tappedTargetCellIndex];t&&t.classList.remove("tapped-target"),e.tappedTargetCellIndex=null,g()}}function w(){const t=v.querySelector(".picker-selected");t&&t.classList.remove("picker-selected"),e.tappedTargetCellIndex!==null&&x(),g()}function z(t){v.querySelectorAll(".number-picker-btn").forEach(s=>{parseInt(s.dataset.number)===t?s.classList.add("picker-selected"):s.classList.remove("picker-selected")}),e.tappedTargetCellIndex!==null&&x(),g()}function E(t){e.modals[t]&&(e.modals.backdrop.style.display="block",e.modals[t].style.display="block",e.modals.backdrop.offsetHeight,e.modals[t].offsetHeight,e.modals.backdrop.classList.remove("opacity-0"),e.modals[t].classList.remove("opacity-0","scale-95"))}function I(t){e.modals[t]&&e.modals[t].style.display==="block"&&(e.modals.backdrop.classList.add("opacity-0"),e.modals[t].classList.add("opacity-0","scale-95"),setTimeout(()=>{e.modals.backdrop.style.display="none",e.modals[t].style.display="none"},300))}function ee(t){const n=p.children[t].getBoundingClientRect();e.radialTargetIndex=t,C.style.left=`${n.left+n.width/2-100}px`,C.style.top=`${n.top+n.height/2-100}px`,C.style.display="block",C.offsetHeight,C.classList.remove("opacity-0","scale-75")}function P(){C.classList.add("opacity-0","scale-75"),setTimeout(()=>{C.style.display="none",e.radialTargetIndex=null},150)}function G(t,n){const s=t.getBoundingClientRect(),a=b.offsetHeight||200;b.style.left=`${s.left+s.width/2-b.offsetWidth/2}px`,b.style.top=`${s.top-a-10}px`,b.style.display="flex",b.offsetHeight,b.classList.remove("opacity-0","scale-90")}function te(){b.classList.add("opacity-0","scale-90"),setTimeout(()=>{b.style.display="none"},100)}function ne(t){const n=document.createElement("div");n.classList.add("hold-progress-indicator"),n.innerHTML='<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="23"></circle></svg>',t.appendChild(n)}function A(t){const n=t.querySelector(".hold-progress-indicator");n&&n.remove()}async function se(){le(),ie(),ae(),me(),await W()}function le(){p.innerHTML="";for(let t=0;t<81;t++){const n=document.createElement("div");n.classList.add("sudoku-cell","flex","items-center","justify-center","text-2xl","cursor-pointer","relative"),n.dataset.index=t,p.appendChild(n)}}function ie(){v.innerHTML="";for(let n=1;n<=9;n++){const s=document.createElement("button");s.classList.add("number-picker-btn","aspect-square","rounded-full","text-xl","font-bold","transition","flex","items-center","justify-center","focus:outline-none","focus:ring-2","focus:ring-blue-500");const a=document.createElement("span");a.textContent=n,a.style.color=X[n-1],s.dataset.number=n,s.appendChild(a),s.classList.add(`bgc${n}-light`),v.appendChild(s)}const t=document.createElement("button");t.classList.add("number-picker-btn","aspect-square","rounded-full","transition","flex","items-center","justify-center","focus:outline-none","focus:ring-2","focus:ring-blue-500","bg-red-500/20"),t.dataset.action="delete",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-red-400"><path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line></svg>',v.appendChild(t)}function L(t,n="",s=null){e.initialBoardString=t.replace(/0/g,"."),e.initialSolutionString=n.replace(/0/g,"."),e.currentSolutionString=e.initialSolutionString,e.currentPuzzleId=s,console.log(`Loading puzzle ID: ${e.currentPuzzleId||"N/A"}`),e.gameState=e.initialBoardString.split("").map((a,l)=>{const i=parseInt(a.replace(".","0"),10);return{value:i===0?null:i,isGiven:i!==0,candidates:new Set,antiCandidates:new Set,index:l,hiddenSingle:null}}),e.history=[],e.historyIndex=-1,k(),g()}function k(){e.isAssistHiddenSinglesActive&&R(),e.historyIndex<e.history.length-1&&(e.history=e.history.slice(0,e.historyIndex+1));const t=JSON.parse(JSON.stringify(e.gameState.map(n=>({...n,candidates:Array.from(n.candidates),antiCandidates:Array.from(n.antiCandidates)}))));e.history.push(t),e.historyIndex=e.history.length-1,N()}function O(t){if(t<0||t>=e.history.length)return;const n=JSON.parse(JSON.stringify(e.history[t]));e.gameState=n.map(s=>({...s,candidates:new Set(s.candidates),antiCandidates:new Set(s.antiCandidates)})),e.historyIndex=t,g(),N()}function ae(){e.peers.length=0;for(let t=0;t<81;t++){const n=Math.floor(t/9),s=t%9,a=Math.floor(n/3),l=Math.floor(s/3),i=new Set;for(let u=0;u<9;u++)i.add(n*9+u);const o=new Set;for(let u=0;u<9;u++)o.add(u*9+s);const r=new Set;for(let u=a*3;u<a*3+3;u++)for(let y=l*3;y<l*3+3;y++)r.add(u*9+y);const f=new Set([...i,...o,...r]);e.peers[t]={all:f,row:new Set([...i].filter(u=>u!==t)),col:new Set([...o].filter(u=>u!==t)),box:new Set([...r].filter(u=>u!==t))}}}function R(){if(!e.gameState||e.gameState.length===0)return;for(let n=0;n<81;n++)e.gameState[n].hiddenSingle=null;const t=[];for(let n=0;n<9;n++){const s=[];for(let a=0;a<9;a++)s.push(n*9+a);t.push(s)}for(let n=0;n<9;n++){const s=[];for(let a=0;a<9;a++)s.push(a*9+n);t.push(s)}for(let n=0;n<3;n++)for(let s=0;s<3;s++){const a=[];for(let l=n*3;l<n*3+3;l++)for(let i=s*3;i<s*3+3;i++)a.push(l*9+i);t.push(a)}for(const n of t){const s=Array(10).fill(0),a=Array(10).fill(null).map(()=>[]);for(const l of n){const i=e.gameState[l];if(!i.value&&i.candidates.size>0)for(const o of i.candidates)s[o]++,a[o].push(l)}for(let l=1;l<=9;l++)if(s[l]===1){const i=a[l][0];e.gameState[i].candidates.size>1&&(e.gameState[i].hiddenSingle=l)}}}function de(t){t.preventDefault();const n=t.target.closest(".sudoku-cell");if(!n)return;const s=parseInt(n.dataset.index);e.pointerDownTime=Date.now(),e.isDragging=!1,e.dragStartCell=s,e.selectionIsActioned=!1;const a=Date.now();if(a-e.lastTap<300&&e.lastTapIndex===s){clearTimeout(e.longPressTimer),ee(s);return}e.lastTap=a,e.lastTapIndex=s,e.longPressTimer=setTimeout(()=>{e.isDragging=!0,e.longPressFired=!0,e.selectedCells.has(s)?(e.dragMode="deselect",e.selectedCells.delete(s)):(e.dragMode="select",e.selectedCells.add(s)),g()},_)}function ce(t){if(t.buttons!==1||!e.dragStartCell)return;const n=t.target.closest(".sudoku-cell");if(!n)return;const s=parseInt(n.dataset.index);!e.isDragging&&Date.now()-e.pointerDownTime>150&&(e.isDragging=!0,e.longPressFired=!0,clearTimeout(e.longPressTimer),e.dragMode=e.selectedCells.has(e.dragStartCell)?"deselect":"select"),e.isDragging&&s!==e.lastDragIndex&&(e.lastDragIndex=s,e.dragMode==="select"&&!e.selectedCells.has(s)?(e.selectedCells.add(s),g()):e.dragMode==="deselect"&&e.selectedCells.has(s)&&(e.selectedCells.delete(s),g()))}function oe(t){if(clearTimeout(e.longPressTimer),!e.longPressFired&&!e.isDragging){const n=t.target.closest(".sudoku-cell");if(!n)return;const s=parseInt(n.dataset.index);re(s)}e.dragStartCell=null,e.isDragging=!1,e.longPressFired=!1,e.lastDragIndex=-1}function re(t){e.gameState[t];const n=e.selectedCells.has(t);e.selectedCells.size>1&&n||e.selectedCells.size,clearCellSelections(),e.tappedTargetCellIndex=t,g()}function ue(t){if(t.ctrlKey||t.metaKey){t.key==="z"?(t.preventDefault(),e.historyIndex>0&&loadFromHistory(e.historyIndex-1)):t.key==="y"&&(t.preventDefault(),e.historyIndex<e.history.length-1&&loadFromHistory(e.historyIndex+1));return}if(t.key>="1"&&t.key<="9"){const n=parseInt(t.key);e.selectedCells.size>0&&$(n)}else if(t.key==="Backspace"||t.key==="Delete"){let n=!1;e.selectedCells.forEach(s=>{T(s)&&(n=!0)}),n&&k(),g()}}function $(t){let n=!1,s=e.selectedCells.size===1,a=s?e.selectedCells.values().next().value:null,l=s?e.gameState[a]:null,i="candidate";if(s&&!l.isGiven)l.candidates.has(t)?i="anti-candidate":l.antiCandidates.has(t)?i="value":l.value===t&&(i="clear");else if(!s){const o=[...e.selectedCells].every(f=>e.gameState[f].candidates.has(t)),r=[...e.selectedCells].every(f=>e.gameState[f].antiCandidates.has(t));o?i="anti-candidate":r&&(i="clear")}e.selectedCells.forEach(o=>{const r=e.gameState[o];if(r.isGiven)return;let f=i;switch(!s&&i==="candidate"&&(r.candidates.has(t)?f="anti-candidate":r.antiCandidates.has(t)&&(f="clear")),f){case"candidate":r.candidates.add(t),r.antiCandidates.delete(t),r.value=null,n=!0;break;case"anti-candidate":r.candidates.delete(t),r.antiCandidates.add(t),r.value=null,n=!0;break;case"value":r.candidates.clear(),r.antiCandidates.clear(),r.value=t,n=!0;break;case"clear":r.candidates.delete(t),r.antiCandidates.delete(t),r.value=null,n=!0;break}}),n&&(k(),g())}function T(t){const n=e.gameState[t];if(n.isGiven)return!1;let s=n.value!==null||n.candidates.size>0||n.antiCandidates.size>0;return n.value=null,n.candidates.clear(),n.antiCandidates.clear(),s}function fe(t,n){const s=e.gameState[n];s.isGiven||(s.value=t,s.candidates.clear(),s.antiCandidates.clear(),k(),B(),x(),z(t),g())}async function ge(){let t=!1,n=[];for(let s=0;s<81;s++){const a=e.gameState[s];if(!a.value&&a.candidates.size===1){const l=a.candidates.values().next().value;a.value=l,a.candidates.clear(),a.antiCandidates.clear(),t=!0,n.push(s)}}if(t){k();for(const s of n){const a=grid.children[s];a&&(a.classList.add("animate-rainbow-sweep"),setTimeout(()=>{a.classList.remove("animate-rainbow-sweep")},500))}}g()}function me(){p.addEventListener("pointerdown",de),p.addEventListener("pointermove",ce),p.addEventListener("pointerup",oe),p.addEventListener("contextmenu",d=>d.preventDefault()),document.body.addEventListener("keydown",ue),document.body.addEventListener("pointerdown",d=>{const c=document.getElementById("dropdown-menu"),m=document.getElementById("menu-btn"),h=m&&c&&(c.contains(d.target)||m.contains(d.target)),M=S.settings.contains(d.target),V=S.newGameSelect&&S.newGameSelect.contains(d.target),q=S.assistance&&S.assistance.contains(d.target);c&&!h&&!c.classList.contains("hidden")&&c.classList.add("hidden");const j=p.contains(d.target),F=v.contains(d.target),J=C.contains(d.target),U=b.contains(d.target),Y=K.contains(d.target);!j&&!F&&!J&&!U&&!h&&!M&&!V&&!Y&&!q&&(B(),C.style.display==="block"&&P(),b.style.display==="flex"&&te())}),document.body.addEventListener("dblclick",d=>{!p.contains(d.target)&&!v.contains(d.target)&&!C.contains(d.target)&&B()});let t=0,n=null,s=!1,a=0,l=null;v.addEventListener("pointerdown",d=>{d.preventDefault();const c=d.target.closest(".number-picker-btn");!c||c.disabled||(l=c,t=Date.now(),s=!1,d.clientX,a=d.clientY,ne(c),n=setTimeout(()=>{n=null,A(c),G(c)},500))},{passive:!1}),v.addEventListener("pointermove",d=>{if(!l)return;d.preventDefault();const c=a-d.clientY;Math.abs(c)>20&&(s=!0,clearTimeout(n),A(l),c>20&&G(l,{x:d.clientX,y:d.clientY}),l=null)},{passive:!1}),v.addEventListener("pointerup",d=>{if(!l)return;A(l),clearTimeout(n);const c=l;if(l=null,!s&&Date.now()-t<500){if(!c)return;if(c.dataset.number){const m=parseInt(c.dataset.number,10);if(e.selectedCells.size>0)x(),$(m);else if(e.tappedTargetCellIndex!==null){const h=e.gameState[e.tappedTargetCellIndex];h&&h.value===m?w():(z(m),x())}else{const h=v.querySelector(".picker-selected");(h?parseInt(h.dataset.number,10):null)===m?w():z(m)}}else if(c.dataset.action==="delete"){let m=!1;if(e.tappedTargetCellIndex!==null){const h=e.gameState[e.tappedTargetCellIndex];h&&!h.isGiven&&T(e.tappedTargetCellIndex)&&(m=!0),x()}else e.selectedCells.size>0&&e.selectedCells.forEach(h=>{T(h)&&(m=!0)});m&&(k(),g())}}s=!1}),document.getElementById("header-undo-btn").addEventListener("click",()=>{e.historyIndex>0&&O(e.historyIndex-1)}),document.getElementById("header-redo-btn").addEventListener("click",()=>{e.historyIndex<e.history.length-1&&O(e.historyIndex+1)}),document.getElementById("new-game-modal-btn").addEventListener("click",()=>{console.log("New Game button clicked!");const d=document.getElementById("difficulty-select");d?(console.log(`Setting difficulty select to: ${e.activeDifficulty}`),d.value=e.activeDifficulty):console.error("Error: Difficulty select element not found!"),console.log(`Calling populatePuzzleList with difficulty: ${e.activeDifficulty}`),H(e.activeDifficulty),console.log("Calling showModal('newGameSelect')"),E("newGameSelect")}),document.getElementById("assistance-btn").addEventListener("click",()=>E("assistance")),document.getElementById("close-assistance-modal").addEventListener("click",()=>I("assistance"));const i=document.getElementById("assist-bivalue-toggle"),o=document.getElementById("assist-hidden-singles-toggle");i&&i.addEventListener("change",d=>{e.isAssistBiValueActive=d.target.checked,e.isAssistBiValueActive&&(o&&(o.checked=!1),e.isAssistHiddenSinglesActive=!1,e.gameState.forEach(c=>c.hiddenSingle=null)),D(),g()}),o&&o.addEventListener("change",d=>{e.isAssistHiddenSinglesActive=d.target.checked,e.isAssistHiddenSinglesActive?(i&&(i.checked=!1),e.isAssistBiValueActive=!1,R()):e.gameState.forEach(c=>c.hiddenSingle=null),D(),g()}),document.getElementById("clear-rules-btn").addEventListener("click",()=>{i&&(i.checked=!1),o&&(o.checked=!1),e.isAssistBiValueActive=!1,e.isAssistHiddenSinglesActive=!1,e.gameState.forEach(d=>d.hiddenSingle=null),D(),g()}),document.getElementById("solve-singles-btn").addEventListener("click",async()=>{S.assistance&&(S.assistance.style.display="none"),S.backdrop&&(S.backdrop.classList.add("opacity-0"),S.backdrop.style.display="none"),await ge()}),document.getElementById("reset-btn").addEventListener("click",()=>E("reset")),document.getElementById("info-btn").addEventListener("click",()=>E("info")),document.getElementById("settings-btn").addEventListener("click",()=>E("settings")),document.getElementById("close-info-modal").addEventListener("click",()=>I("info")),document.getElementById("close-settings-modal").addEventListener("click",()=>I("settings")),document.getElementById("cancel-reset-btn").addEventListener("click",()=>I("reset")),document.getElementById("cancel-select-new-game-btn").addEventListener("click",()=>I("newGameSelect")),document.getElementById("confirm-reset-btn").addEventListener("click",()=>{const d=e.puzzleCatalog[e.activeDifficulty]?.find(c=>c.id===e.currentPuzzleId);if(d)L(d.puzzle,d.solution,d.id);else{const c=e.puzzleCatalog.Easy?.[0];c?L(c.puzzle,firstSpoon.solution,c.id):L(e.initialBoardString,e.initialSolutionString)}B(),I("reset")}),S.backdrop.addEventListener("click",()=>{I("info"),I("settings"),I("reset"),I("newGameSelect"),I("assistance")});const r=document.getElementById("menu-btn"),f=document.getElementById("dropdown-menu");r&&f&&r.addEventListener("click",()=>{f.classList.toggle("hidden")}),document.getElementById("menu-reset-btn").addEventListener("click",()=>{E("reset"),f?.classList.add("hidden")}),document.getElementById("menu-info-btn").addEventListener("click",()=>{E("info"),f?.classList.add("hidden")}),document.getElementById("menu-settings-btn").addEventListener("click",()=>{E("settings"),f?.classList.add("hidden")}),C.addEventListener("click",d=>{const c=d.target.closest(".radial-item");if(c&&e.radialTargetIndex!==null&&e.gameState[e.radialTargetIndex]){let m=!1;if(c.dataset.number){const h=parseInt(c.dataset.number);fe(h,e.radialTargetIndex)}else c.dataset.action==="erase"&&(e.gameState[e.radialTargetIndex].isGiven||T(e.radialTargetIndex)&&(m=!0),x(),clearCellSelections(),m&&(k(),g()));P()}else P()});const u=document.getElementById("difficulty-select");u&&u.addEventListener("change",d=>{e.activeDifficulty=d.target.value,H(e.activeDifficulty)});const y=document.getElementById("blackout-mode-toggle");y&&y.addEventListener("change",d=>{e.isBlackoutModeEnabled=d.target.checked;const c=v.querySelector(".picker-selected[data-number]");if(highlightButton){const m=parseInt(c.dataset.number,10);z(m)}else w(),g()})}function D(){const t=document.getElementById("clear-rules-btn");e.isAssistBiValueActive||e.isAssistHiddenSinglesActive?t.classList.remove("hidden"):t.classList.add("hidden")}se();
